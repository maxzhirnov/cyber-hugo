{{ define "main" }}


<div class="relative max-w-5xl mx-auto mt-12 mb-20 px-4 py-8
            bg-gray-900/90 border-2 border-cyan-400 rounded-2xl
            shadow-[0_0_40px_#00ffe7_inset,0_0_80px_#ff00cc44]
            backdrop-blur-md
            before:absolute before:inset-0 before:rounded-2xl before:pointer-events-none">
  
  {{/*  Outer glow  */}}
  <div class="absolute -inset-2 rounded-3xl pointer-events-none z-0 shadow-[0_0_32px_#00ffe7,0_0_64px_#ff00cc44]"></div>

  {{/*  Page title  */}}
  <h1 class="relative z-10 font-vt323 text-4xl md:text-5xl text-center uppercase tracking-widest mb-10 drop-shadow-[0_0_16px_#00ffe7]">
    {{ .Title | default "Posts" }}
  </h1>

  <div class="relative z-10 flex flex-col gap-10 justify-center">
    {{ $paginator := .Paginate .Pages }}
    {{ range $paginator.Pages }}
      <article class="w-full max-w-full sm:max-w-md md:max-w-lg lg:max-w-xl mx-auto
        bg-gray-800/90 border-2 border-cyan-600 rounded-xl p-6
        shadow-[inset_0_0_16px_#00ffe7]
        transition-transform hover:scale-[1.005] hover:shadow-[0_0_32px_#ff00cc44]">
        <div class="prose prose-headings:font-vt323 max-w-prose mx-auto prose-img:max-w-full prose-pre:overflow-x-auto">
          {{ .Render "summary" }}
        </div>
      </article>
    {{ else }}
      <div class="text-center text-cyan-400">No posts found.</div>
    {{ end }}
  </div>

  <!-- Pagination -->
  {{ if gt $paginator.TotalPages 1 }}
  <nav aria-label="Page navigation" class="relative z-10 mt-10">
    <ul class="flex flex-wrap justify-center items-center -space-x-px">
      <!-- Previous page -->
      {{ if $paginator.HasPrev }}
      <li>
        <a href="{{ $paginator.Prev.URL }}" 
           class="flex items-center justify-center px-3 h-10 ms-0 leading-tight text-cyan-300 bg-gray-900/80 border-2 border-e-0 border-cyan-400 rounded-s-lg hover:bg-fuchsia-700/40 hover:text-yellow-200 hover:border-fuchsia-500 transition-all shadow-[0_0_8px_#00ffe7_inset] font-vt323">
          <svg class="w-3 h-3 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 1 1 5l4 4"/>
          </svg>
          <span class="sr-only">Previous</span>
        </a>
      </li>
      {{ else }}
      <li>
        <span class="flex items-center justify-center px-3 h-10 ms-0 leading-tight text-gray-500 bg-gray-800/60 border-2 border-e-0 border-gray-700 rounded-s-lg cursor-not-allowed font-vt323">
          <svg class="w-3 h-3 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 1 1 5l4 4"/>
          </svg>
          <span class="sr-only">Previous</span>
        </span>
      </li>
      {{ end }}

      <!-- Page numbers -->
      {{ $adjacent_links := 2 }}
      {{ $max_links := (add (mul $adjacent_links 2) 1) }}
      {{ $lower_limit := (add $paginator.PageNumber (mul $adjacent_links -1)) }}
      {{ $upper_limit := (add $paginator.PageNumber $adjacent_links) }}
      
      <!-- First page and ellipsis -->
      {{ if gt $paginator.TotalPages $max_links }}
        {{ if gt $lower_limit 1 }}
        <li>
          <a href="{{ $paginator.First.URL }}" 
             class="flex items-center justify-center px-3 h-10 leading-tight text-cyan-300 bg-gray-900/80 border-2 border-cyan-400 hover:bg-fuchsia-700/40 hover:text-yellow-200 hover:border-fuchsia-500 transition-all shadow-[0_0_8px_#00ffe7_inset] font-vt323">1</a>
        </li>
        {{ if gt $lower_limit 2 }}
        <li>
          <span class="flex items-center justify-center px-3 h-10 leading-tight text-cyan-300 bg-gray-900/80 border-2 border-cyan-400 font-vt323">...</span>
        </li>
        {{ end }}
        {{ end }}
      {{ end }}

      <!-- Page numbers -->
      {{ range $paginator.Pagers }}
        {{ if and (ge .PageNumber $lower_limit) (le .PageNumber $upper_limit) }}
        <li>
          <a href="{{ .URL }}" 
             class="flex items-center justify-center px-3 h-10 leading-tight {{ if eq . $paginator }}text-fuchsia-400 bg-gray-900/80 border-2 border-fuchsia-500 shadow-[0_0_12px_#ff00cc_inset]{{ else }}text-cyan-300 bg-gray-900/80 border-2 border-cyan-400 hover:bg-fuchsia-700/40 hover:text-yellow-200 hover:border-fuchsia-500 transition-all shadow-[0_0_8px_#00ffe7_inset]{{ end }} font-vt323">
            {{ .PageNumber }}
          </a>
        </li>
        {{ end }}
      {{ end }}

      <!-- Ellipsis and last page -->
      {{ if gt $paginator.TotalPages $max_links }}
        {{ if lt $upper_limit (sub $paginator.TotalPages 1) }}
        <li>
          <span class="flex items-center justify-center px-3 h-10 leading-tight text-cyan-300 bg-gray-900/80 border-2 border-cyan-400 font-vt323">...</span>
        </li>
        {{ end }}
        {{ if lt $upper_limit $paginator.TotalPages }}
        <li>
          <a href="{{ $paginator.Last.URL }}" 
             class="flex items-center justify-center px-3 h-10 leading-tight text-cyan-300 bg-gray-900/80 border-2 border-cyan-400 hover:bg-fuchsia-700/40 hover:text-yellow-200 hover:border-fuchsia-500 transition-all shadow-[0_0_8px_#00ffe7_inset] font-vt323">
            {{ $paginator.TotalPages }}
          </a>
        </li>
        {{ end }}
      {{ end }}

      <!-- Next page -->
      {{ if $paginator.HasNext }}
      <li>
        <a href="{{ $paginator.Next.URL }}" 
           class="flex items-center justify-center px-3 h-10 leading-tight text-cyan-300 bg-gray-900/80 border-2 border-cyan-400 rounded-e-lg hover:bg-fuchsia-700/40 hover:text-yellow-200 hover:border-fuchsia-500 transition-all shadow-[0_0_8px_#00ffe7_inset] font-vt323">
          <svg class="w-3 h-3 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
          </svg>
          <span class="sr-only">Next</span>
        </a>
      </li>
      {{ else }}
      <li>
        <span class="flex items-center justify-center px-3 h-10 leading-tight text-gray-500 bg-gray-800/60 border-2 border-gray-700 rounded-e-lg cursor-not-allowed font-vt323">
          <svg class="w-3 h-3 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
          </svg>
          <span class="sr-only">Next</span>
        </span>
      </li>
      {{ end }}
    </ul>
  </nav>
  {{ end }}
</div>
{{ end }}
